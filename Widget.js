<!--GHL Widget Loader-->
 
function l(e,t){let n=r();return(l=function(e,t){return e-=371,n[e]})(e,t)}function r(){let e=["then","replace",".hl-cookie-consent-banner","1150668WZxZSm","location","https://services.leadconnectorhq.com","lastIndexOf","Multiple chat-widget elements found.","cookie-config","substring","async","cookie","Error fetching widget data:","2603120rqCTwJ","data-location-id","config","chat-widget","100493cfRkuL","removeChild","https://www.google.com/recaptcha/api.js?render=explicit","getAttribute","getTime","addEventListener","/chat-widget/public/config/","click","split","data-","attributes","origin","data-stencil-namespace","getElementsByTagName","hasOwnProperty","data-resources-url","60996pkTEpQ","name",".button.customize","value","disconnect","setAttribute","readyState","observe","type","pop","#hl-cc-preference-popup","length","GET","2946648fiswOV","/chat-widget/chat-widget.js","data-cookie-banner","/chat-widget/loader.js",".button.secondary","parse","1119dXLdan","application/json","createElement","data-cdn-url","querySelector","removeEventListener","data-widget-id","76ktpxPM","message","builder-preview-version","noModule","37205ZkHlps","parentNode","marketplace-u-r-l","Error:","error","button.hl-cc-preference-popup-button.save","currentScript","?chatType=","module","catch","118uyekUp","src","appendChild","warn","json","script","91zXZiwd","div[data-chat-widget]","shift","chat-type","location-id","Error: location-id is missing","defer","remove","Fail to load widget","body",".button.primary","log"];return(r=function(){return e})()}(()=>{for(var e=l,t=r();;)try{if(323578==+parseInt(e(391))+parseInt(e(447))/2*(-parseInt(e(426))/3)+parseInt(e(433))/4*(parseInt(e(437))/5)+-parseInt(e(407))/6*(parseInt(e(453))/7)+parseInt(e(420))/8+parseInt(e(377))/9+-parseInt(e(387))/10)break;t.push(t.shift())}catch(e){t.push(t.shift())}})(),(()=>{let p=l;document[p(443)]=document[p(443)]||(t=p,(e=document.getElementsByTagName("script"))[e[t(418)]-1]);var e,m=document[p(443)][p(401)],h=m[p(429)]&&m["data-cdn-url"][p(410)],v=m[p(432)]&&m[p(432)][p(410)],f=m["data-location-id"]&&m["data-location-id"].value,g=m[p(422)]&&m[p(422)].value;function w(t,n,r){let c=p;if(n){let e=r+"/chat-widget/public/config/default/"+n;t&&(e+=c(444)+t);try{fetch(e,{method:c(419),headers:{"Content-Type":c(427),"location-id":n}}).then(e=>{e[c(451)]()})[c(446)](e=>(c,{success:!1}))}catch(e){}}}function b(e){var t=p,e=("; "+document[t(385)]).split("; "+e+"=");return 2===e[t(418)]?e[t(416)]()[t(399)](";")[t(455)]():null}function y(){let e=p,s=document[e(430)](e(376)),t=b(e(382));if(t)try{return!1!==JSON[e(425)](t)}catch(e){return!0}return!s||new Promise(c=>{let t=e,a=!1,n=s.querySelector(t(372)),r=s.querySelector(t(424)),o=s.querySelector(t(409)),i=()=>{let e=setInterval(()=>{b(l(382))&&(clearInterval(e),!a)&&(a=!0,c(!0))},100)},d=()=>{var e=t;a||(i(),n&&n[e(431)](e(398),d),r&&r[e(431)](e(398),d),o&&o[e(431)](e(398),u))},u=()=>{let e=t,n=()=>{var e,t,n=l,r=document.querySelector(n(417));return!!r&&(e=r[n(430)](n(442)),r=r[n(430)]("button.hl-cc-preference-popup-button.reject"),t=()=>{let e=setInterval(()=>{b(l(382))&&(clearInterval(e),!a)&&(a=!0,c(!0))},100)},e&&e[n(396)](n(398),t),r&&r[n(396)](n(398),t),!0)};n()||new MutationObserver((e,t)=>{n()&&t.disconnect()})[e(414)](document[e(371)],{childList:!0,subtree:!0})};n&&n[t(396)](t(398),d),r&&r[t(396)](t(398),d),o&&o[t(396)](t(398),u)})}async function n(){var e=p;if(g||void 0===g){var t=document[e(430)](".hl-cookie-consent-banner"),n=b(e(382));if((g||t&&!n)&&!await y())return}var t=document[e(428)]("script"),n=(t[e(415)]=e(445),t.src=h+("/chat-widget/chat-widget.esm.js?v="+(new Date)[e(395)]()),document[e(428)]("script")),r=(n[e(436)]=!0,n[e(448)]=h+e(421),n[e(412)](e(406),h+"/chat-widget/chat-widget.js"),n[e(412)](e(422),g),n[e(412)](e(403),h+e(390)),document.createElement(e(452))),r=(r.src=e(393),r[e(412)](e(459),""),r[e(412)](e(384),""),document[e(430)](e(454))),c=document[e(404)](e(390));if(null!==r&&0===c[e(418)]){m=r[e(401)],f=m[e(388)];try{r[e(460)]?r[e(460)]():r[e(438)][e(392)](r)}catch(e){}}var a=null;if(f||0===c[e(418)]&&!r&&v)for(var a=document.createElement("chat-widget"),o=m.length-1;0<=o;o--){var i=m[o][e(408)],d=m[o].value;try{i=i[e(375)](e(400),"")}catch(e){}a[e(412)](i,d)}if(a){var r=a[e(394)]("widget-id");if(r){var u=a;let c=p,e=u[c(394)](c(439))||"https://services.leadconnectorhq.com";fetch(e+c(397)+r,{method:"GET",headers:{"Content-Type":c(427),"widget-id":r}})[c(374)](e=>e[c(451)]())[c(374)](e=>{var t=c;if(e){if(e.status&&200!==e.status)throw new Error(e[t(434)]);var n,r=e[t(389)];for(n in r)r[t(405)](n)&&u.setAttribute(n,r[n]);document[t(371)].appendChild(u)}}).catch(e=>{c,u.remove()})}else r=a.getAttribute(e(457)),w(a[e(394)](e(456))||"",r,a[e(394)]("marketplace-u-r-l")||e(379)),document.body.appendChild(a)}else{c&&c[e(418)],c.length;var s,l,r=document[e(430)](e(390));!a&&r&&(c=r&&r?.[e(394)](e(456))||"",s=r&&r?.getAttribute(e(457))||"",l=r?.[e(394)](e(439))||e(379),r?.[e(394)](e(435))||w(c,s,l))}r=t,c=n,s=p,document.head.appendChild(r),document.head[s(449)](c)}m[p(406)]||(e=document[p(443)].src[p(380)]("/"),t=document[p(443)][p(448)][p(383)](0,e),document[p(443)][p(412)](p(406),t+p(423)));var h=h||(document[p(443)][p(448)]?(e=document.currentScript[p(448)][p(380)]("/"),document.currentScript[p(448)][p(383)](0,e)):window[p(378)][p(402)]),t=async()=>{var e=p,e=document[e(430)](e(376)),t=b("cookie-config");(g||e&&!t)&&(e||await new Promise(r=>{let c=l,e=document[c(430)](c(376));if(e)return r(!0);let t=new MutationObserver((e,t)=>{var n=c;document[n(430)](n(376))&&(t.disconnect(),r(!0))});t.observe(document[c(371)],{childList:!0,subtree:!0}),setTimeout(()=>{var e=c;t[e(411)](),r(!1)},15e3)}),!await y())||n()};"loading"!==document[p(413)]?t():document.addEventListener("DOMContentLoaded",t)})();
    <!-- Optimized Draggable Enhancement Script -->
 
    (function(){
      
      let data-resources-url="https://widgets.leadconnectorhq.com/chat-widget/loader.js"
      let data-widget-id="68f2b84dc62596ad849806a9">
        let bubbleDraggable = false;
        let windowDraggable = false;
        let checkCount = 0;
        const maxChecks = 30;
        
        // Use requestAnimationFrame for smoother animations
        let animationFrameId = null;
        
        // Wait for the GHL widget to load
        const checkElements = setInterval(() => {
            checkCount++;
            
            const widget = document.querySelector('chat-widget');
            
            if(!widget) {
                if(checkCount >= maxChecks) {
                    clearInterval(checkElements);
                    console.log('ðŸš¨ Max checks reached - widget not found');
                }
                return;
            }
            
            if(!widget.shadowRoot) {
                if(checkCount >= maxChecks) {
                    clearInterval(checkElements);
                    console.log('ðŸš¨ Max checks reached - no shadowRoot');
                }
                return;
            }
            
            const bubble = findBubbleElement(widget.shadowRoot);
            const chatWindow = findChatWindow(widget.shadowRoot);

            // Bubble draggable setup
            if(bubble && !bubbleDraggable) {
                console.log('ðŸ’¬ Found bubble element, making draggable');
                makeDraggable(bubble, 'bubble');
                bubbleDraggable = true;
            }

            // Window draggable setup
            if(chatWindow && !windowDraggable) {
                console.log('ðŸªŸ Found chat window, making draggable');
                makeWindowDraggable(chatWindow);
                windowDraggable = true;
            }

            if((bubbleDraggable && windowDraggable) || checkCount >= maxChecks) {
                clearInterval(checkElements);
                if(bubbleDraggable && windowDraggable) {
                    console.log('ðŸŽ‰ Both chat bubble & window are now draggable!');
                }
            }
        }, 500);

        // ---- Enhanced Finders ----
        function findBubbleElement(root) {
            const selectors = [
                'button',
                'button[aria-label*="chat"]',
                'button[class*="bubble"]',
                'div[class*="bubble"]',
                '.chat-bubble',
                '[role="button"]',
                'div > button'
            ];
            
            for (let sel of selectors) {
                const el = root.querySelector(sel);
                if (el) {
                    const rect = el.getBoundingClientRect();
                    if (rect.width > 30 && rect.height > 30) {
                        return el;
                    }
                }
            }
            return null;
        }

        function findChatWindow(root) {
            const selectors = [
                'div[class*="window"]',
                'div[class*="chat"]',
                'div[class*="modal"]',
                'div[role="dialog"]',
                'div > div',
                'div > div > div'
            ];
            
            for (let sel of selectors) {
                const el = root.querySelector(sel);
                if (el) {
                    // Window might be hidden initially, so check offset dimensions
                    if (el.offsetWidth > 200 || el.offsetHeight > 200) {
                        return el;
                    }
                }
            }
            return null;
        }

        // ---- Optimized Smooth Draggable Function ----
        function makeDraggable(element, type) {
            console.log(`ðŸ”§ Making ${type} draggable with smooth movement`);

            // Apply draggable styles
            element.style.position = 'fixed';
            element.style.zIndex = type === 'bubble' ? '999999' : '999998';
            element.style.userSelect = 'none';
            element.style.webkitUserSelect = 'none';
            element.style.cursor = type === 'bubble' ? 'grab' : 'move';
            
            // Add hardware acceleration for smooth dragging
            element.style.willChange = 'transform';
            element.style.transform = 'translateZ(0)';

            // Set initial position for bubble
            if (type === 'bubble') {
                element.style.bottom = '20px';
                element.style.right = '20px';
            }

            let startX, startY, initX, initY;
            let isDragging = false;
            let hasMoved = false;
            let clickTimer = null;

            // Remove any existing listeners
            element.removeEventListener('mousedown', handleMouseDown);
            element.removeEventListener('touchstart', handleTouchStart);

            element.addEventListener('mousedown', handleMouseDown);
            element.addEventListener('touchstart', handleTouchStart, { passive: false });

            function handleMouseDown(e) {
                startDrag(e);
            }

            function handleTouchStart(e) {
                startDrag(e.touches[0]);
                e.preventDefault();
            }

            function startDrag(point) {
                startX = point.clientX;
                startY = point.clientY;
                
                const rect = element.getBoundingClientRect();
                initX = rect.left;
                initY = rect.top;
                
                isDragging = false;
                hasMoved = false;

                // Set a timer to detect click vs drag
                clickTimer = setTimeout(() => {
                    // Click detected - allow GHL default behavior
                }, 150);

                // Add document-level listeners for drag
                document.addEventListener('mousemove', handleDragMove);
                document.addEventListener('mouseup', handleDragEnd);
                document.addEventListener('touchmove', handleDragMove, { passive: false });
                document.addEventListener('touchend', handleDragEnd);

                element.style.cursor = 'grabbing';
                
                // Prevent text selection during drag
                document.body.style.userSelect = 'none';
            }

            function handleDragMove(e) {
                const point = e.type.includes('touch') ? e.touches[0] : e;
                const dx = point.clientX - startX;
                const dy = point.clientY - startY;

                // Check if we've moved enough to consider it a drag
                if (!hasMoved && (Math.abs(dx) > 5 || Math.abs(dy) > 5)) {
                    hasMoved = true;
                    isDragging = true;
                    clearTimeout(clickTimer); // Cancel click detection
                }

                if (!isDragging) return;

                e.preventDefault();
                e.stopPropagation();

                // Use requestAnimationFrame for smooth animation
                if (animationFrameId) {
                    cancelAnimationFrame(animationFrameId);
                }
                
                animationFrameId = requestAnimationFrame(() => {
                    const newX = Math.max(10, Math.min(initX + dx, window.innerWidth - element.offsetWidth - 10));
                    const newY = Math.max(10, Math.min(initY + dy, window.innerHeight - element.offsetHeight - 10));
                    
                    element.style.left = `${newX}px`;
                    element.style.top = `${newY}px`;
                    element.style.right = 'auto';
                    element.style.bottom = 'auto';
                });
            }

            function handleDragEnd(e) {
                // Clear the click timer
                if (clickTimer) {
                    clearTimeout(clickTimer);
                    clickTimer = null;
                }

                // Cancel any pending animation frame
                if (animationFrameId) {
                    cancelAnimationFrame(animationFrameId);
                    animationFrameId = null;
                }

                // Remove document listeners
                document.removeEventListener('mousemove', handleDragMove);
                document.removeEventListener('mouseup', handleDragEnd);
                document.removeEventListener('touchmove', handleDragMove);
                document.removeEventListener('touchend', handleDragEnd);

                // Restore cursor and text selection
                element.style.cursor = type === 'bubble' ? 'grab' : 'move';
                document.body.style.userSelect = '';

                // If we were dragging, prevent the default click behavior
                if (isDragging) {
                    e.preventDefault();
                    e.stopPropagation();
                }
                
                isDragging = false;
                hasMoved = false;
            }
        }

        // ---- Make Window Draggable ----
        function makeWindowDraggable(windowEl) {
            console.log('ðŸªŸ Making chat window draggable...');
            
            // Ensure window is properly positioned
            windowEl.style.position = 'fixed';
            windowEl.style.zIndex = '999998';
            
            // Only set initial position if not already positioned
            if (!windowEl.style.top && !windowEl.style.left) {
                windowEl.style.top = '50%';
                windowEl.style.left = '50%';
                windowEl.style.transform = 'translate(-50%, -50%)';
            }
            
            makeDraggable(windowEl, 'window');
            
            // Store reference for continuous monitoring
            window.ghlChatWindow = windowEl;
        }

        // ---- Continuous check for window ----
        setInterval(() => {
            if (windowDraggable) return;
            
            const widget = document.querySelector('chat-widget');
            if(widget && widget.shadowRoot) {
                const chatWindow = findChatWindow(widget.shadowRoot);
                if(chatWindow && chatWindow !== window.ghlChatWindow) {
                    console.log('ðŸ”„ Chat window appeared, making draggable');
                    makeWindowDraggable(chatWindow);
                    windowDraggable = true;
                }
            }
        }, 1000);

    })();
    



